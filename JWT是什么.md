# JWT是什么

JWT代表JSON Web令牌（JSON Web Token）。它是一种开放标准（RFC 7519），用于在各方之间安全地传输信息作为 JSON 对象。JWT通常用于身份验证和授权，尤其在 Web 应用程序中广泛使用。

JWT由三个部分组成，每个部分之间用点号（.）分隔：

**Header（头部）**：包含了令牌的类型（通常为JWT）以及所使用的签名算法。

**Payload（负载）**：包含了称为声明的数据。声明分为注册声明、公共声明和私有声明。注册声明包含了一些预定义的声明，如令牌的发布者（"iss"）、过期时间（"exp"）等。公共声明包含了任何自定义的声明。私有声明包含了应用程序特定的信息。

**Signature（签名）**：使用头部指定的签名算法对头部和负载进行签名，以确保令牌的完整性和真实性。

JWT的典型用法是在用户进行身份验证后生成一个JWT，并将其作为凭据发送给客户端。客户端在以后的请求中将该JWT包含在标头中发送给服务器。服务器接收到JWT后，会验证其完整性和真实性，然后根据负载中的信息对请求进行授权或拒绝。

当创建JWT时，它通常经历以下几个步骤：

**选择令牌的类型和签名算法**：在创建JWT之前，需要确定要使用的令牌类型（通常为JWT）以及用于签名的算法（例如HMAC SHA256、RSA等）。

**准备头部（Header）**：头部是一个包含了令牌类型和签名算法的JSON对象。例如：

```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```

在这个例子中，"alg"表示签名算法（HMAC SHA256），"typ"表示令牌的类型（JWT）。

**准备负载（Payload）**：负载包含了所需的声明信息。声明分为三类：注册声明、公共声明和私有声明。例如：

```json
{
  "sub": "1234567890",
  "name": "John Doe",
  "iat": 1516239022
}
```

在这个例子中，"sub"表示主题（subject）、"name"表示名称、"iat"表示令牌的签发时间（issued at）。

**生成签名（Signature）**：签名是使用选定的算法对头部和负载进行签名的结果。签名的目的是确保令牌在传输过程中不被篡改。例如，如果使用HMAC SHA256算法，可以将头部和负载以及一个密钥进行哈希，并使用密钥签名生成签名。

**将头部、负载和签名组合成JWT**：最后，将经过Base64编码的头部、负载和签名使用点号连接起来形成JWT。例如：

```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

这个JWT包含了Base64编码的头部、负载和签名，它们使用点号分隔开来。

JWT的优点包括跨平台和语言的兼容性、自包含性（因为包含了所有必要的信息，无需在服务器上保存会话状态）以及数字签名提供的数据完整性和真实性保证。
